#!/bin/bash
# Get the Python file name from the environment variable
PYFILE="$PYFILE"
# Check if the PYFILE environment variable is set
if [ -z "$PYFILE" ]; then
    echo "Error: PYFILE environment variable is not set."
    exit 1
fi
# Extract the base name of the Python file without extension
BASENAME=$(basename "$PYFILE" .py)
# Compile the Python file
python3 -m py_compile "$PYFILE"
# Check if the compilation was successful
if [ $? -eq 0 ]; then
    # Rename the compiled file to .pyc
    mv "$BASENAME.cpython-*.pyc" "$BASENAME.pyc"
    echo "Compiling $PYFILE ..."
    echo "Compilation successful. Output: $BASENAME.pyc"
else
    echo "Compilation failed for $PYFILE."
fi
